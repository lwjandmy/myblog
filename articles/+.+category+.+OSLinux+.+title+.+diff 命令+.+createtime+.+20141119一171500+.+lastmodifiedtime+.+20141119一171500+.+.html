

<html><head><meta charset="UTF-8"><title>diff 命令
</title><meta name="viewport" content="width=device-width, initial-scala=1.0"></head><body><div id="markdown">






<h1 id="diff-">diff 命令</h1>
<p><a href="http://blog.chinaunix.net/uid-26000296-id-3507646.html">转:linux diff详解</a></p>
<p>比较两个文件，输出不同，diff有三种格式：</p>
<ul>
<li>正常格式（normal diff）         diff FILE1 FILE2</li>
<li>上下文格式（context diff）      diff -c FILE1 FILE2</li>
<li>合并格式（unified diff）        diff -u FILE1 FILE2</li>
</ul>
<hr>
<p>正常格式例子:</p>
<p>文件1.txt</p>
<pre><code class="lang-text">a
a
a
</code></pre>
<p>文件2.txt</p>
<pre><code class="lang-text">a
b
a
</code></pre>
<p>执行<code>diff 1.txt 2.txt</code>后输出:</p>
<pre><code class="lang-text">2c2
&lt; a
---
&gt; b
</code></pre>
<p>正常格式的含义：
<code>4c4</code>表示1.txt的第4行变成(change)2.txt的第4行.</p>
<pre><code class="lang-text">&#39;c&#39; 改变 change
&#39;a&#39; 增加 addition
&#39;d&#39; 删除 deletion
</code></pre>
<pre><code class="lang-text">&lt; a 表示1.txt少了&#39;a&#39;
--- 表示1和2文件的分隔符
&gt; b 表示2.txt多了&#39;b&#39;
</code></pre>
<hr>
<p>上下文格式:</p>
<p>文件1.txt 2.txt同上.</p>
<p>执行diff -c 1 2后输出(-c, context):</p>
<pre><code class="lang-text">*** 1    2014-11-19 16:33:45.832810528 +0800
--- 2    2014-11-19 16:41:53.320169582 +0800
***************
*** 1,3 ****
  a
! a
  a
--- 1,3 ----
  a
! b
  a
</code></pre>
<p>上下文格式的含义:<br>1,3 表示显示的内容是从第1行开始, 共显示3行.</p>
<pre><code class="lang-text">! 表示有改动
- 表示被删除
+ 表示新增
</code></pre>
<hr>
<p>合并格式例子:<br>文件1.txt 2.txt同上.<br>执行diff -u 1 2后输出(-u, unified):</p>
<pre><code class="lang-text">--- 1    2014-11-19 16:33:45.832810528 +0800
+++ 2    2014-11-19 16:41:53.320169582 +0800
@@ -1,3 +1,3 @@
 a
-a
+b
 a
</code></pre>
<p>合并格式的含义:<br><code>@@ -1,7 +1,7 @@</code>  其中的两个@作为起首和结束<br>-1,7 +1,7表示 &#39;原文件(-)从第1行开始后的7行&#39; 变成 &#39;修改后的文件(+)从第1行开始后的7行&#39;</p>
<hr>
<p>合并变体(git diff)格式例子:<br>文件1.txt 2.txt同上.   </p>
<pre><code class="lang-bash">diff --git 1.txt 2.txt
</code></pre>
<p>执行后输出:</p>
<pre><code class="lang-text">index 6f8a38c..449b072 100644
--- 1.txt
+++ 2.txt
@@ -1,3 +1,3 @@
 a
-a
+b
 a
</code></pre>
<p>合并变体(git diff)格式的含义：</p>
<pre><code class="lang-bash">diff --git 1.txt 2.txt
</code></pre>
<p>--git 表明这个diff是git版本的，分别比较a版本的1文件和b版本的1文件<br>index 6f8a38c..449b072 100644   表示两个版本的git哈希值（index区域的6f8a38c对象，与工作目录区域的449b072对象进行比较），最后的六位数字是对象的模式（普通文件，644权限）<br>其它内容与合并输出格式含义相同。</p>


</div>
<script src="../js/jquery-1.12.3.min.js" charset="utf-8"></script>
<link rel="stylesheet" href="../css/highlight.min.css">
<script src="../js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
jQuery(function ($) {
});
</script></body></html>

