

<html><head><meta charset="UTF-8"><title>jdk和cglib实现动态代理
</title><meta name="viewport" content="width=device-width, initial-scala=1.0"></head><body><div id="markdown">






<h1 id="jdk-cglib-">jdk和cglib实现动态代理</h1>
<p><a href="https://yq.aliyun.com/articles/38210">JDK和CGLIB生成动态代理类的区别</a></p>
<p><a href="http://blog.csdn.net/u013126379/article/details/52121096">Spring的两种代理JDK和CGLIB的区别浅谈</a></p>
<hr>
<h2 id="jdk-">jdk动态代理原理</h2>
<p>child有成员变量parent, child有parent的接口的所有方法, child的方法中调用parent的方法.</p>
<p>child中parent接口的所有方法, 利用反射机制, 回调parent中方法.</p>
<h2 id="cglib-">cglib动态代理原理</h2>
<p>child是parent的子类, 覆盖父类所有方法, 因此parent不能被声明为final.</p>
<p>加载parent类的class文件, 修改字节码, 生成child继承自parent.</p>
<hr>
<h2 id="-">限制</h2>
<p>jdk动态代理只有在parent实现了接口, 才能生成child代理类.</p>
<p>cglib动态代理只有在parent不被声明为final, 才能生成child代理类.</p>
<hr>
<h2 id="spring-">spring的默认动态代理策略</h2>
<p>如果parent实现了接口, 则使用jdk动态代理; 若没实现接口, 则使用cglib代理.</p>
<hr>
<h2 id="-spring-cglib-">强制spring统一使用cglib代理</h2>
<pre><code class="lang-xml">&lt;aop:aspectj-autoproxy proxy-target-class=&quot;true&quot;/&gt;
</code></pre>


</div>
<script src="../js/jquery-1.12.3.min.js" charset="utf-8"></script>
<link rel="stylesheet" href="../css/highlight.min.css">
<script src="../js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
jQuery(function ($) {
});
</script></body></html>

