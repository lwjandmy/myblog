<html>
<head>
<meta charset="utf-8">
<title>json formatter tool</title>
<style type="text/css">
textarea {
	width: 100%;
	height: 45%;
}
div {
	margin: 5px;
}
.operations {
	text-align: center;
}
</style>
</head>
<body>
	<div>
		<textarea id="input_textarea"></textarea>
	</div>
	<div class="operations">
		<input type="button" value="格式化" onclick="transform(format)">
		<input type="button" value="压缩" onclick="transform(tiny)">
	</div>
	<div>
		<textarea id="output_textarea"></textarea>
	</div>
	<script>
		function transform(func) {
			try {
				var json = document.getElementById('input_textarea').value;
				var transformed = func.call(null, json);
				document.getElementById('output_textarea').value = transformed;
				document.getElementById('output_textarea').select();
				document.getElementById('output_textarea').focus();
			} catch (e) {
				document.getElementById('output_textarea').value = e;
			}
		}
		function format(json) {
			return JSON.stringify(JSON.parse(json), null, 2);
		}
		function tiny(json) {
			return JSON.stringify(JSON.parse(json));
		}
	</script>
</body>
</html>