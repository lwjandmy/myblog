

<html><head><meta charset="UTF-8"><title>学习_ENV和_G
</title><meta name="viewport" content="width=device-width, initial-scala=1.0"></head><body><div id="markdown">






<h1 id="-_env-_g">学习_ENV和_G</h1>
<pre><code class="lang-text">-- 对一个全局块，load函数在加载此块时，执行了
-- local _ENV = _G
-- return function(...)
--    _ENV.var1 = _ENV.var2 + _ENV.var3
--    ...
-- end
-- 即load函数将_ENV放在闭包中,将变量限制在_ENV中

var = 1
fun = loadfile(&quot;1.lua&quot;, &quot;bt&quot;, {print = print, _G = { var = 3 }, var = 2});
fun()

-- 1.lua:
-- print(var)
-- print(_G.var)

-- OUTPUT:
-- 2
-- 3



-- _ENV._G.var  和  _G.var是一样的效果吗，晕中。。。
</code></pre>


</div>
<script src="../js/jquery-1.12.3.min.js" charset="utf-8"></script>
<link rel="stylesheet" href="../css/highlight.min.css">
<script src="../js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
jQuery(function ($) {
});
</script></body></html>

