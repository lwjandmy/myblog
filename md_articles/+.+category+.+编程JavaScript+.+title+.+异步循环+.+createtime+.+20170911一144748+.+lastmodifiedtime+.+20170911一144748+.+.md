# 异步循环

```js
// 异步的for循环
var forEachAsync = function (list, process, callback) {
	
	var index = 0;
	
	var forEachAsyncNextCallback = (function(index, process, list, finishCallback) {

		var index = 0;
		var process;
		var list;
		var finishCallback;

		var forEachAsyncNextCallback = function() {
			
			if (undefined === list[index]) {
				finishCallback && finishCallback();
			} else {
				process(list[index++], forEachAsyncNextCallback);
			}
			
		}
		
		return forEachAsyncNextCallback;
	})(0, process, list, callback);
	
	forEachAsyncNextCallback();
	
};

// 测试:
var childrens = getChildren();

forEachAsync(childrens, function (children, nextCallback) {

	console.log(children);
	nextCallback();
	
}, function () {
	console.log('finish');
});
			
			
```